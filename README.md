# å®‰è£…ä½“éªŒ

https://upload-images.jianshu.io/upload_images/26002059-1539f775a7a59eb7.png

## åŒ…å«åŠŸèƒ½ï¼š
- 9å¼ å›¾ã€‚å¦‚æœåªæœ‰ä¸€å¼ å›¾ï¼Œé‚£ä¹ˆå•å¼ å›¾çš„å®½é«˜æ ¹æ®å›¾ç‰‡åŸå§‹å®½é«˜ç­‰æ¯”ä¾‹ç¼©æ”¾
- åªæœ‰ä¸€å¼ å›¾çš„æ—¶å€™ï¼Œè¿™ä¸ªå›¾å¯èƒ½æ˜¯è§†é¢‘ï¼Œå›¾ä¸­é—´æœ‰æ’­æ”¾æŒ‰é’®
- å†…å®¹æ”¯æŒè¡¨æƒ…ã€‚[å¾®ç¬‘]è¦æ˜¾ç¤ºä¸ºğŸ˜Š
- å†…å®¹æœ‰@äººåŠŸèƒ½ï¼Œ@äººæœ‰ç‚¹å‡»äº‹ä»¶
- æ¯ä¸ªItemå¸¦æœ‰è¯„è®ºï¼ŒXXXå›å¤XXX

## ä¼ ç»Ÿåšæ³•çš„æ•ˆæœï¼š
- é¦–æ¬¡è¿›å…¥Activityåè§¦å‘ä¸‹æ‹‰åˆ·æ–°ï¼Œè¯·æ±‚æˆåŠŸåsetAdpaterï¼Œè¿™æ—¶å€™å¸§ç‡ä¼šæ‰åˆ°49å¸§å·¦å³ã€‚ä¸¢å¤±11å¸§
- æ‰‹æŒ‡å¾€ä¸‹æ»šåŠ¨ï¼Œæ»šåŠ¨è¿‡ç¨‹ä¸­ï¼Œå¸§ç‡åœ¨57å¸§ - 60å¸§å¾˜å¾Š
- é€€å‡ºActivityå†æ¬¡è¿›å…¥ï¼Œç”±äºjavaåº•å±‚çš„ä»£ç ä¼˜åŒ–ï¼Œæ‰§è¡Œæ•ˆç‡ä¼šä¸Šå‡ã€‚é¦–æ¬¡setAdpaterå¸§ç‡ä¸º53å·¦å³
![349be342f7149268de53b2f9c1eed7a.jpg](https://upload-images.jianshu.io/upload_images/26002059-e02535c5f1985679.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/400)


## æˆ‘ä¼˜åŒ–åçš„æ•ˆæœï¼š
- é¦–æ¬¡è¿›å…¥Activityåè§¦å‘ä¸‹æ‹‰åˆ·æ–°ï¼Œè¯·æ±‚æˆåŠŸåsetAdpaterï¼Œè¿™æ—¶å€™å¸§ç‡ä¼šæ‰åˆ°57å¸§å·¦å³ã€‚ä¸¢å¤±3å¸§å·¦å³
- æ‰‹æŒ‡å¾€ä¸‹æ»šåŠ¨ï¼Œæ»šåŠ¨è¿‡ç¨‹ä¸­ï¼Œå¸§ç‡å…¨ç§°60å¸§
![84330a3939703026fca5cf11cae2a3f.jpg](https://upload-images.jianshu.io/upload_images/26002059-2d66b56ae270cc20.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/400)

![ezgif-4-e790b5f7b4.gif](https://upload-images.jianshu.io/upload_images/26002059-98570aebb282f2fd.gif?imageMogr2/auto-orient/strip)


## æˆ‘çš„åŸºç¡€ä¼˜åŒ–æ–¹æ¡ˆï¼ˆåˆ«çš„å¸–å­ä¹Ÿä¼šè®²çš„ï¼‰ï¼š
- âœ… 1ã€æ¯ä¸ªitemä¸­ä¼—å¤šå…ƒç´ çš„ç‚¹å‡»äº‹ä»¶ä¸è¦æ¯æ¬¡éƒ½newã€‚åº”è¯¥æ˜¯onCreateViewHolderä¸­imageView.setOnClickListener(this)ã€‚ç„¶ååœ¨onBindViewHolderä¸­imageView.setTagã€‚é¿å…æ»šåŠ¨è¿‡ç¨‹ä¸­é¢‘ç¹new ClickListener()
- âœ… 2ã€SpanTextåšå¥½ç¼“å­˜ï¼Œé¿å…æ¯æ¬¡æ»šåŠ¨éƒ½è§£æã€‚æ€»ä¹‹ï¼Œæ£€æŸ¥Adpaterä¸­æ‰€æœ‰new Object()çš„ä»£ç ï¼Œèƒ½ä¸newå°±ä¸new
- âœ… 3ã€æ‰‹å†™DrawableCenterTextViewï¼Œè§£å†³ç³»ç»Ÿçš„Buttonçš„DrawableLeftä¼šè´´è¾¹é—®é¢˜ã€‚å¦åˆ™è¦å¤šä¸€å±‚LinearLayoutåŒ…è£¹
- âœ… 4ã€éœ€è¦é‡å¤è®¡ç®—çš„sizeè¦è®¾ç½®ä¸ºå…¨å±€å˜é‡staticï¼Œé¿å…æ¯æ¬¡è®¡ç®—ã€‚æ¯”å¦‚æ¯å¼ å›¾ç‰‡çš„å®½é«˜ï¼Œè¡¨æƒ…å›¾ç‰‡çš„15spå¤§å°
- âœ… 5ã€åº•éƒ¨åŠ è½½æ›´å¤šï¼šä½¿ç”¨notifyItemRangeInsertedä»£æ›¿notifyDataSetChangedã€‚åè€…ä¼šè§¦å‘2ã€3æ¬¡onCreateViewHolder

## æˆ‘çš„è¿›é˜¶ä¼˜åŒ–æ–¹æ¡ˆï¼ˆä½ åœ¨åˆ«çš„å¸–å­çœ‹ä¸åˆ°çš„ï¼‰ï¼š
- âœ… 1ã€glideé¦–æ¬¡åŠ è½½å›¾ç‰‡ä¼šåˆ›å»ºçº¿ç¨‹æ± ï¼Œè€—æ—¶çº¦50msï¼Œå¯ä»¥ç§»åˆ°Appæ‰“å¼€æ—¶çš„æ¬¢è¿ç•Œé¢å°±åˆ›å»ºå¥½ã€‚èŠ‚çœ50ms
- âœ… 2ã€é¦–æ¬¡setAdpaterå‰å…ˆä¸ç€æ€¥ç»“æŸä¸‹æ‹‰åˆ·æ–°çŠ¶æ€ã€‚å…ˆå¼€å¯Threadï¼Œåœ¨Threadä¸­è§£ææ–‡å­—çš„è¡¨æƒ…å’Œ@äººè§£æï¼Œç»„æˆSpanTextå¹¶ç¼“å­˜åˆ°modelä¸­ï¼ŒèŠ‚çœçº¦12ms
- âœ… 3ã€é‡‡ç”¨LruCacheç¼“å­˜æœ€æ–°çš„32ä¸ªè¡¨æƒ…çš„drawableï¼Œè¿™æ ·å¯ä»¥åŠ å¿«å¸¸è§è¡¨æƒ…çš„è§£æé€Ÿåº¦
- âœ… 4ã€åœ¨Threadä¸­æŒ‰List<Model>.count() è§£æitemçš„xmlå¸ƒå±€ï¼Œå¹¶å­˜æ”¾åœ¨LinkedList<View> ä¸­ï¼ˆä¸ºäº†èŠ‚çœå†…å­˜ï¼Œæˆ‘æœ€å¤šé™åˆ¶8æ¡ï¼‰ã€‚åœ¨onCreateViewHolderä¸­è¿›è¡Œ .pollï¼ŒèŠ‚çœ150mså·¦å³
- âœ… 5ã€åœ¨Threadä¸­æŒ‰List<Model>.count() é¢„åˆ›å»ºå›¾ç‰‡å’Œè¯„è®ºçš„ç¼“å­˜æ± ï¼šLinkedList<ImageView> å’Œ LinkedList<è¯„è®ºTextView>ã€‚åœ¨itemæ˜¾ç¤ºçš„æ—¶å€™ã€‚ä»ç¼“å†²æ± ä¸­å–ï¼Œè€Œä¸æ˜¯newã€‚èŠ‚çœ100mså·¦å³
- âœ… 6ã€åœ¨Adpaterçš„ onViewRecycled ä¸­æŠŠå›¾ç‰‡å’Œè¯„è®ºremoveåå­˜å…¥ç¼“å­˜æ± ã€‚è¿™ä¸€æ­¥ä¸»è¦ä¸ºäº†æ»šåŠ¨æµç•…
